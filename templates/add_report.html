<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add Report</title>
            <link rel= "stylesheet" type= "text/css" href= "static/css/fontawesome.8f41798f.css">
            <link rel= "stylesheet" type= "text/css" href= "static/css/styles.352a605f.css">

</head>
<style>
    .card > .content {
    padding: 10px;
    font-size: 13px;
}
table#selectedparamtable td + td ~ td {
   display: none;
}
</style>
<body>

<form name="createreportrform" method="post" >
                <div class="form-group">
                    <table class="width100">
                        <tbody><tr class="form-group">
                            <td class="width11">
                                <label class="control-label col-sm-2"><h4 class="binding">Report Details</h4></label>
                            </td>
                            <td class="blockquoteresult width86" width="90%">
                                <table>
                                    <tbody><tr>
                                        <td class="width30 paddedbottom10" name="reportname">
                                            <label class="control-label binding">Report name&nbsp;<span class="required">*</span></label>
                                             <div class="form-inline">
                                                <input id="reportname" name="reportname" valattribute="reportname" type="text" class="form-control pristine untouched valid empty">
                                            </div>
                                        </td>

                                        <td class="width20 paddedbottom10">
                                            <label class="control-label binding">Report type&nbsp;<span class="required">*</span></label>
                                            <select id="reportType" name="reportType"   class="form-control width170px pristine untouched valid not-empty"  value="">
                                                <option label="Table" value="Table" selected="selected">Table</option>
                                                <option label="Chart" value="Chart">Chart</option>
                                            </select>
                                        </td>
                                        <td class="width20 paddedbottom10">
                                            <label class="control-label binding">Report sub type&nbsp;</label>
                                            <select id="reportSubType" name="reportSubType" model="formData.reportSubType" class="form-control width170px pristine untouched valid empty"
                                                   value="">
                                                <option value="" class="binding" selected="selected">Select one</option>
                                                <option label="Bar" value="string:Bar">Bar</option>
                                                <option label="Pie" value="string:Pie">Pie</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="width30 paddedbottom10">
                                            <label class="control-label binding">Report category&nbsp;</label>

                                            <div class="form-inline">
                                                <input id="reportCategory" name="reportCategory" type="text" class="form-control pristine untouched valid empty">
                                            </div>
                                        </td>
                                        <td class="width20">
                                        </td>

                                    </tr>
                                    <tr>
                                        <td class="width30 paddedbottom10">
                                            <label class="control-label binding">Description</label>
                                            <div class="form-inline">
                                            <textarea id="description" name="description" class="form-control pristine untouched valid empty" rows="2" model="formData.description"></textarea>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody></table>
                            </td>
                        </tr>

                        <tr class="col-md-1 minheight30px"></tr>

                        <tr class="form-group">
                            <td class="width8">
                                <div data-switch="" on="formData.reportType">
                               <div data-switch-default="" class="scope">
                                        <label class="control-label col-sm-2"><h4 class="binding">Sql</h4></label>
                                    </div>
                                </div>
                            </td>
                            <td class="width86">
                                <div data-switch="" >
                                    <div data-switch-default="" class="scope">
                                        <div class="blockquoteresult">
                                            <table class="width100">
                                                <tbody><tr>
                                                    <td>
                                                        <label class="control-label binding">Sql<span class="required">*</span></label>
                                                        <textarea class="form-control width100 pristine untouched empty invalid invalid-required" id="reportSql" rows="4" name="sql" model="formData.reportSql" required=""></textarea>
                                                        <form-validate valattributeform="createreportrform" valattribute="sql"><span show="" class="scope"><small class="error binding hide" show="createreportrform.sql.$error.req || rc.createreportrform.attempted || createreportrform.$submitted ">Required Field</small><small class="required error binding hide" show="createreportrform.sql.$error.nval">Must be numeric</small></span></form-validate>
                                                    </td>
                                                </tr>
                                            </tbody></table>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr class="col-md-1 minheight30px"></tr>

                        <tr class="form-group">
                            <td class="width11">
                                <label class="control-label col-sm-2"><h4 class="binding">Report Parameters</h4></label>
                            </td>
                            <td class="blockquoteresult width86">
                                <select id="parametervalue" name="parametervalue" class="form-control pristine untouched valid empty">
                                        <option value="" selected>Select allowed parameter</option>
                                {% for p in params %}
                                    <option value="{{ p.id }}">{{p.parameter_label}}</option>
                                {% endfor %}
                                    </select>
                                    <a class="btn btn-primary binding" onclick="parameterSelected()"><i class="fa fa-plus "></i>Add
                                    </a>
                                
                                <table id="selectedparamtable"  name="selectedparamtable" width="50%">
                                    <tbody><tr class="graybg">
                                        <th id="parame" name="parame" class="binding">Parameter</th>
                                         <th  id="value"  name="value" class="binding"  >Value</th>
                                        <th id="dd" name="dd" class="binding">Actions</th>
                                    </tr>

                                </tbody></table>
                            </td>
                        </tr>
                    </tbody></table>
                </div>
<!--                <div class="col-md-offset-6">-->
<!--                    <a id="cancel" href="#/reports" class="btn btn-default binding">Cancel</a>-->
<!--                    <button id="save" type="submit" class="btn btn-primary binding" >Submit</button>-->
<!--                </div>-->
             <input type="submit" class="btn btn-primary binding" value="Add">
        </form>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
$(selectedparamtable).hide();
var paramlist='';
var myDropdown=document.getElementsByName('parametervalue');
    function parameterSelected(){
    console.log('option changed : '+myDropdown[0].value);
var selectedval=myDropdown[0].value;
var selectedlebel=$('#parametervalue option:selected').text();
    console.log($('#parametervalue option:selected').text());
    console.log(paramlist);
    var  tablerow='<td> <input id="selectedparam" name="selectedparam['+paramlist+']" type="text" value="'+selectedval +'"readonly></td>'
    console.log(tablerow);
    var deletestr='<td><input type="button" id="delete" value="Delete" onclick="deleteRow(this)"/>hi</td>';
    var deletestr='<td><input value="Resend" class="btn btn-primary btn-xs" id="resend_sms" style="color:red" name="resend_sms" type="button"></td>';
    console.log(deletestr);
    //$(selectedparamtable).find('tbody').append("<tr><td id='selectedparam' name='selectedparam'>"+selectedlebel+"</td><td>"+selectedval+"</td>"+deletestr+"</tr>");
    $(selectedparamtable).find('tbody').append("<tr><td id='selectedparamlabel' name='selectedparamlabel'>"+selectedlebel+"</td>"+tablerow+deletestr+"</tr>");


    $(selectedparamtable).show();

    }
function deleteRow(btn) {
  var row = btn.parentNode.parentNode;
  row.parentNode.removeChild(row);
}
</script>
</html>